<!--6Al5zKHNONHBue0w
dunice2017_db_user
-->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ADVOC ‚Äî Home</title>
  <style>
    :root{--accent:#1877f2;--green:#42b72a;--muted:#f0f2f5;--card:#fff}
    *{box-sizing:border-box}
    body{margin:0;font-family:Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:var(--muted);color:#222}
    .navbar{display:flex;gap:10px;align-items:center;padding:12px 18px;background:#fff;border-bottom:1px solid #e6e6e6}
    .nav-left{display:flex;gap:8px;align-items:center}
    .nav-right{margin-left:auto;display:flex;gap:8px;align-items:center}
    .btn{background:var(--accent);color:#fff;border:none;padding:8px 14px;border-radius:20px;cursor:pointer}
    .btn.ghost{background:transparent;color:var(--accent);border:1px solid #e6e6e6}
    .search{flex:1;padding:8px 12px;border-radius:20px;border:1px solid #ddd}
    main{max-width:1180px;margin:28px auto;padding:0 16px}
    .upload-panel{background:var(--card);padding:20px;border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,.06);margin-bottom:20px;display:none}
    .upload-row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
    .upload-row input[type="file"]{padding:6px}
    .upload-row input[type="text"]{padding:8px;border-radius:8px;border:1px solid #ddd;width:320px}
    .gallery{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:18px}
    .card{background:var(--card);border-radius:12px;padding:12px;box-shadow:0 6px 18px rgba(0,0,0,.05);position:relative;overflow:hidden}
    .user-row{display:flex;align-items:center;gap:10px;margin-bottom:8px}
    .avatar{width:40px;height:40px;border-radius:50%;object-fit:cover;border:2px solid var(--accent)}
    .username{font-weight:700}
    .media{width:100%;border-radius:10px;cursor:pointer;display:block}
    .caption{font-weight:600;margin:8px 0}
    .actions{display:flex;gap:10px;align-items:center}
    .like,.comment,.dm{background:var(--accent);color:#fff;padding:6px 10px;border-radius:10px;border:none;cursor:pointer}
    .comment{background:#666}
    .counts{font-weight:600;margin-left:6px}
    #fullscreen{display:none;position:fixed;inset:0;background:rgba(0,0,0,.88);align-items:center;justify-content:center;z-index:1400}
    #fullscreen img,#fullscreen video{max-width:92%;max-height:92%;border-radius:10px}
    .comment-panel{position:fixed;left:0;right:0;bottom:-100%;background:#fff;border-top-left-radius:14px;border-top-right-radius:14px;padding:12px;max-height:60vh;overflow:auto;z-index:1500;transition:bottom .28s}
    .comment-panel.active{bottom:0}
    .comment-list{max-height:40vh;overflow:auto;margin-bottom:8px}
    .comment-row{padding:8px;border-radius:8px;background:#f6f6f6;margin-bottom:6px}
    .small{font-size:13px;color:#666}
    @media (max-width:600px){.upload-row input[type="text"]{width:100%}}
  </style>
</head>
<body>
  <header class="navbar">
    <div class="nav-left">
      <a href="index.html"><button class="btn">ADVOC</button></a>
      <a href="business.html"><button class="btn ghost">Business</button></a>
    </div>

    <input id="search" class="search" placeholder="Search captions..." />

    <div class="nav-right" id="navRight">
      <a href="sign-up.html"><button class="btn ghost" id="signupBtn">Sign up</button></a>
      <a href="login.html"><button class="btn" id="loginBtn">Login</button></a>
    </div>
  </header>

  <main>
    <section id="uploadPanel" class="upload-panel" aria-hidden="true">
  <form id="uploadForm" class="upload-row"
        action="/upload"
        method="POST"
        enctype="multipart/form-data">

    <input type="file" name="media" accept="image/*,video/*" required />
    <input type="text" name="caption" placeholder="Write a caption (optional)" />
    <button class="btn" type="submit">Upload</button>

    <div id="uploadStatus" class="small" style="margin-left:8px"></div>
  </form>
</section>


    <h2 style="text-align:center;margin:6px 0 18px 0">Media Gallery</h2>

    <div class="gallery" id="gallery" aria-live="polite"></div>
  </main>

  <!-- Fullscreen viewer -->
  <div id="fullscreen" onclick="closeFullscreen()">
    <div id="fullscreenInner"></div>
  </div>

  <!-- Comments sheet -->
  <div id="commentSheet" class="comment-panel" aria-hidden="true">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
      <strong>Comments</strong>
      <button id="closeComments" class="btn ghost">Close</button>
    </div>

    <div class="comment-list" id="commentList"></div>

    <form id="commentForm" style="display:flex;gap:8px">
      <input type="text" name="text" placeholder="Write a comment..." style="flex:1;padding:10px;border-radius:8px;border:1px solid #ddd" required />
      <button class="btn" type="submit">Send</button>
    </form>
  </div>

<script>
/*
  index.html (frontend) ‚Äî works with your current backend routes:
  - GET  /images               -> returns array of posts (fields: _id, url, caption, type, likes, comments, user, createdAt)
  - GET  /auth-check           -> { loggedIn: true/false, username }
  - POST /upload               -> accepts FormData { media, caption } (credentials included)
  - POST /like/:postId
  - GET  /comments/:postId
  - POST /comments/:postId
  - GET  /profile/:username    -> { username, profilePic }
  - (links to sign-up.html, login.html, business.html)
*/

const API_ROOT = ""; // same origin
let posts = [];
let currentUser = null;
let currentPostId = null;

// DOM refs
const gallery = document.getElementById("gallery");
const uploadPanel = document.getElementById("uploadPanel");
const uploadForm = document.getElementById("uploadForm");
const uploadStatus = document.getElementById("uploadStatus");
const navRight = document.getElementById("navRight");
const commentSheet = document.getElementById("commentSheet");
const commentList = document.getElementById("commentList");
const commentForm = document.getElementById("commentForm");
const search = document.getElementById("search");

async function authCheck() {
  try {
    const res = await fetch(API_ROOT + "/auth-check", { credentials: "include" });
    const data = await res.json();
    if (data.loggedIn) {
      currentUser = data.username;
      showLoggedInUI();
      uploadPanel.style.display = "block";
      uploadPanel.setAttribute("aria-hidden", "false");
    } else {
      currentUser = null;
      showLoggedOutUI();
      uploadPanel.style.display = "none";
      uploadPanel.setAttribute("aria-hidden", "true");
    }
  } catch (err) {
    console.error("Auth check failed", err);
  }
}

function showLoggedInUI() {
  navRight.innerHTML = `
    <span style="font-weight:700; margin-right:8px">Hi, ${escapeHtml(currentUser)}</span>
    <button id="logoutBtn" class="btn ghost">Logout</button>
  `;
  document.getElementById("logoutBtn").addEventListener("click", logout);
}

function showLoggedOutUI() {
  navRight.innerHTML = `
    <a href="sign-up.html"><button class="btn ghost">Sign up</button></a>
    <a href="login.html"><button class="btn">Login</button></a>
  `;
}

async function logout() {
  try {
    await fetch(API_ROOT + "/logout", { method: "POST", credentials: "include" });
    await authCheck();
    await loadPosts();
  } catch (err) {
    console.error("Logout failed", err);
  }
}

async function loadPosts() {
  try {
    const res = await fetch(API_ROOT + "/images");
    posts = await res.json();
    renderGallery(posts);
  } catch (err) {
    console.error("Could not load posts", err);
    gallery.innerHTML = "<p style='padding:20px'>Could not load media.</p>";
  }
}

function renderGallery(list) {
  const q = search.value.trim().toLowerCase();
  const filtered = q ? list.filter(p => (p.caption || "").toLowerCase().includes(q)) : list;

  gallery.innerHTML = "";
  if (!filtered.length) {
    gallery.innerHTML = "<p style='padding:16px;text-align:center;color:#666'>No media found.</p>";
    return;
  }

  filtered.forEach(post => {
    const card = document.createElement("div");
    card.className = "card";

    // Header (user)
    const header = document.createElement("div");
    header.className = "user-row";
    const avatar = document.createElement("img");
    avatar.className = "avatar";
    // We don't have profile picture URL in post by default ‚Äî show placeholder
    avatar.src = "/profile_pics/default.png";
    avatar.alt = "avatar";
    avatar.onerror = () => avatar.src = "/profile_pics/default.png";

    const name = document.createElement("div");
    name.innerHTML = `<div class="username">${escapeHtml(post.user)}</div><div class="small">${new Date(post.createdAt || post._id ? post.createdAt || '' : '').toLocaleString()}</div>`;
    name.style.flex = "1";

    const dmBtn = document.createElement("button");
    dmBtn.className = "dm-btn";
    dmBtn.textContent = "DM";
    dmBtn.onclick = (e) => { e.stopPropagation(); openDM(post.user); };

    header.appendChild(avatar);
    header.appendChild(name);
    header.appendChild(dmBtn);

    card.appendChild(header);

    // Media
    if (post.type === "video" || (post.url && post.url.match(/\.(mp4|webm|mov|mkv)(\?|$)/i))) {
      const vid = document.createElement("video");
      vid.className = "media";
      vid.src = post.url;
      vid.controls = true;
      vid.onclick = (e) => { e.stopPropagation(); openFullscreen(post); };
      card.appendChild(vid);
    } else {
      const img = document.createElement("img");
      img.className = "media";
      img.src = post.url;
      img.alt = post.caption || "media";
      img.onclick = () => openFullscreen(post);
      card.appendChild(img);
    }

    // caption
    if (post.caption) {
      const cap = document.createElement("div");
      cap.className = "caption";
      cap.textContent = post.caption;
      card.appendChild(cap);
    }

    // actions
    const actions = document.createElement("div");
    actions.className = "actions";

    const likeBtn = document.createElement("button");
    likeBtn.className = "like";
    likeBtn.innerHTML = `‚ù§ <span class="counts">${post.likes || 0}</span>`;
    likeBtn.onclick = async (e) => {
      e.stopPropagation();
      await likePost(post._id, likeBtn);
    };

    const commentBtn = document.createElement("button");
    commentBtn.className = "comment";
    commentBtn.innerHTML = `üí¨ <span class="counts">${(post.comments && post.comments.length) || 0}</span>`;
    commentBtn.onclick = (e) => {
      e.stopPropagation();
      openComments(post._id);
    };

    actions.appendChild(likeBtn);
    actions.appendChild(commentBtn);

    card.appendChild(actions);
    gallery.appendChild(card);
  });
}

function openFullscreen(post) {
  const fs = document.getElementById("fullscreen");
  const inner = document.getElementById("fullscreenInner");
  inner.innerHTML = ""; // reset
  if (post.type === "video" || (post.url && post.url.match(/\.(mp4|webm|mov|mkv)(\?|$)/i))) {
    const v = document.createElement("video");
    v.src = post.url;
    v.controls = true;
    v.autoplay = true;
    inner.appendChild(v);
  } else {
    const i = document.createElement("img");
    i.src = post.url;
    inner.appendChild(i);
  }
  fs.style.display = "flex";
}

function closeFullscreen() {
  const fs = document.getElementById("fullscreen");
  const inner = document.getElementById("fullscreenInner");
  inner.innerHTML = "";
  fs.style.display = "none";
}

async function likePost(postId, btn) {
  try {
    const res = await fetch(API_ROOT + `/like/${postId}`, { method: "POST", credentials: "include" });
    const data = await res.json();
    if (data.likes !== undefined) {
      btn.querySelector(".counts").textContent = data.likes;
    } else {
      console.warn("Like failed", data);
    }
  } catch (err) {
    console.error("Like error", err);
  }
}

async function openComments(postId) {
  currentPostId = postId;
  commentList.innerHTML = "<p class='small'>Loading...</p>";
  commentSheet.classList.add("active");
  commentSheet.setAttribute("aria-hidden", "false");
  try {
    const res = await fetch(API_ROOT + `/comments/${postId}`);
    const comments = await res.json();
    renderComments(comments);
  } catch (err) {
    commentList.innerHTML = "<p class='small'>Could not load comments.</p>";
  }
}

function renderComments(comments) {
  commentList.innerHTML = "";
  if (!Array.isArray(comments) || !comments.length) {
    commentList.innerHTML = "<p class='small'>No comments yet</p>";
    return;
  }
  comments.forEach(c => {
    const row = document.createElement("div");
    row.className = "comment-row";
    row.innerHTML = `<strong>${escapeHtml(c.user)}</strong> <div class="small">${escapeHtml(c.text)}</div>`;
    commentList.appendChild(row);
  });
}

commentForm.addEventListener("submit", async (e) => {
  e.preventDefault();
  if (!currentPostId) return;
  const text = commentForm.querySelector('input[name="text"]').value.trim();
  if (!text) return;
  try {
    const res = await fetch(API_ROOT + `/comments/${currentPostId}`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      credentials: "include",
      body: JSON.stringify({ text })
    });
    const data = await res.json();
    if (data.success) {
      renderComments(data.comments || []);
      commentForm.reset();
      await loadPosts(); // refresh counts
    } else {
      alert(data.message || "Comment failed");
    }
  } catch (err) {
    console.error("Comment error", err);
    alert("Could not post comment");
  }
});

document.getElementById("closeComments").addEventListener("click", () => {
  commentSheet.classList.remove("active");
  commentSheet.setAttribute("aria-hidden", "true");
  currentPostId = null;
});

// upload handling
uploadForm.addEventListener("submit", async (e) => {
  e.preventDefault();
  const fd = new FormData(uploadForm);
  uploadStatus.textContent = "Uploading...";
  try {
    const res = await fetch(API_ROOT + "/upload", {
      method: "POST",
      credentials: "include",
      body: fd
    });
    const data = await res.json();
    if (data.success) {
      uploadStatus.textContent = "Upload successful";
      uploadForm.reset();
      await loadPosts();
      setTimeout(()=>uploadStatus.textContent = "", 2000);
    } else {
      uploadStatus.textContent = data.message || "Upload failed";
      console.warn("Upload result", data);
    }
  } catch (err) {
    console.error("Upload error", err);
    uploadStatus.textContent = "Upload error";
  }
});

// DM placeholder
function openDM(username) {
  if (!currentUser) { alert("You must be logged in to DM"); return; }
  alert("Open DM with " + username + " ‚Äî use /dm routes (not implemented in UI yet)");
}

// escape helper
function escapeHtml(s){ if(!s) return ""; return String(s).replace(/[&<>"']/g,c=>({ "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;" })[c]); }

// search
search.addEventListener("input", () => renderGallery(posts));

// initial
(async function init(){
  await authCheck();
  await loadPosts();
})();
</script>
</body>
</html>























































<!--<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ADVOC</title>
    <style>
        body {
            background: #f0f2f5;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            color: #333;
        }

        .div-1 {
            background: #ffffff;
            width: 100%;
            height: 80px;
            border-bottom: 1px solid #ddd;
            display: flex;
            align-items: center;
            padding: 0 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .div-1 button {
            border-radius: 25px;
            border: none;
            background-color: #1877f2;
            color: white;
            padding: 10px 20px;
            margin-right: 10px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, background 0.2s;
        }

        .div-1 button:hover {
            transform: translateY(-2px);
            background-color: #145dbf;
        }

        h2 {
            text-align: center;
            margin-top: 30px;
            font-weight: 600;
            color: #444;
        }

        form {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
        }

        .button-5, .button {
            border-radius: 25px;
            border: none;
            padding: 10px 20px;
            margin-left: 10px;
            cursor: pointer;
            background-color: #42b72a;
            color: white;
            font-weight: bold;
            transition: transform 0.2s, background 0.2s;
        }

        .button-5:hover, .button:hover {
            transform: translateY(-2px);
            background-color: #36921f;
        }

        #gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 20px;
            padding: 20px;
            max-width: 1200px;
            margin: auto;
        }

        .image-container {
            background: #ffffff;
            border-radius: 15px;
            padding: 15px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transition: transform 0.3s, box-shadow 0.3s;
            position: relative;
        }

        .image-container:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .image-container img {
            width: 100%;
            border-radius: 15px;
            margin-bottom: 10px;
        }

        .caption {
            font-weight: bold;
            margin-bottom: 10px;
        }

        .like-btn {
            position: absolute;
            right: 15px;
            bottom: 60px;
            font-size: 28px;
            cursor: pointer;
            transition: transform 0.2s;
            color: #fff;
            text-shadow: 0 0 5px #000;
        }

        .like-btn.liked {
            color: #ff2d55;
            transform: scale(1.3);
        }

        .comment-panel {
            position: fixed;
            bottom: -100%;
            left: 0;
            width: 100%;
            max-height: 60%;
            background: #fff;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.2);
            border-top-left-radius: 15px;
            border-top-right-radius: 15px;
            transition: bottom 0.3s ease;
            overflow-y: auto;
            padding: 20px;
            z-index: 1000;
        }

        .comment-panel.active {
            bottom: 0;
        }

        .comment-panel h3 {
            margin-top: 0;
        }

        .comment-list div {
            margin-bottom: 10px;
        }

        .comment-form input {
            padding: 8px;
            border-radius: 12px;
            border: 1px solid #ddd;
            margin-right: 5px;
            width: 45%;
        }

        .comment-form button {
            border-radius: 12px;
            border: none;
            padding: 8px 12px;
            background-color: #1877f2;
            color: white;
            cursor: pointer;
        }

        .div-9{
            position: inherit;
            text-align: center;
            border-radius: 10px;
            background: white;
            border: 1px solid whitesmoke;
            padding: 40px;
            width: 550px;
            margin: 90px auto 0 auto;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
        }
        .input-6{
            border-radius: 20px;
            height: 40px;
            width: 500px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
            border: 1px solid whitesmoke;
            text-align: center;
            padding: 10px;
            

        }
    </style>
</head>
<body>


<div class="div-1">
    <a href="#"><button>GAMES</button></a>
    <a href="business.html"><button>BUSINESS</button></a>
    <button>SIGN UP</button>
    <button>LOGIN</button>
    <input type="text" id="searchBar"  class="input-6" placeholder="Search images..." />

</div>

<div class="div-9">
<h2>Upload an Image</h2>
<form action="/upload" method="POST" enctype="multipart/form-data">
    <input type="file" name="image" class="button-5" required>
    <input type="text" name="caption" placeholder="Write something about your picture..." style="padding:10px; border-radius:10px; border:1px solid #ccc; margin-left:10px; width:250px;">
    <button type="submit" class="button">Upload</button>
</form>
</div>

<h2>Uploaded Images And Tap On Image To Comment</h2>
<div id="gallery"></div>

<div class="comment-panel" id="commentPanel">
    <h3>Comments</h3>
    <div class="comment-list" id="commentList"></div>
    <form class="comment-form" id="commentForm">
        <input type="text" name="user" placeholder="Your name" required>
        <input type="text" name="text" placeholder="Comment" required>
        <button type="submit">Add Comment</button>
        <button type="button" id="cancelComment">Cancel</button>
    </form>
</div>

<script>
let allImages = []; 
let currentImage = '';

// Load gallery
function loadGallery() {
    fetch('/images')
    .then(res => res.json())
    .then(images => {
        allImages = images;
        renderGallery(images);
    });
}

// Render images
function renderGallery(images) {
    const gallery = document.getElementById("gallery");
    gallery.innerHTML = "";

    images.forEach(img => {
        const container = document.createElement("div");
        container.className = "image-container";

        const imageEl = document.createElement("img");
        imageEl.src = "/uploads/" + img.filename;
        container.appendChild(imageEl);

        if (img.caption) {
            const cap = document.createElement("p");
            cap.className = "caption";
            cap.textContent = img.caption;
            container.appendChild(cap);
        }

        const likeBtn = document.createElement("div");
        likeBtn.className = "like-btn";
        likeBtn.innerHTML = `&#10084; ${img.likes}`;
        likeBtn.onclick = () => {
            fetch(`/like/${img.filename}`, { method: "POST" })
            .then(res => res.json())
            .then(data => {
                likeBtn.innerHTML = `&#10084; ${data.likes}`;
                likeBtn.classList.add('liked');
                setTimeout(() => likeBtn.classList.remove('liked'), 300);
            });
        };
        container.appendChild(likeBtn);

        imageEl.onclick = () => openComments(img.filename);

        gallery.appendChild(container);
    });
}

// Search filter
document.getElementById("searchBar").addEventListener("input", function() {
    const query = this.value.toLowerCase();
    const filtered = allImages.filter(img => (img.caption || '').toLowerCase().includes(query));
    renderGallery(filtered);
});

// Open comments
function openComments(filename) {
    currentImage = filename;
    const panel = document.getElementById('commentPanel');
    const list = document.getElementById('commentList');

    fetch(`/images`)
    .then(res => res.json())
    .then(images => {
        const img = images.find(i => i.filename === filename);
        list.innerHTML = '';
        img.comments.forEach(c => {
            const div = document.createElement('div');
            div.textContent = `${c.user}: ${c.text}`;
            list.appendChild(div);
        });
    });

    panel.classList.add('active');
}

// Comment submission
document.getElementById('commentForm').onsubmit = function(e) {
    e.preventDefault();
    const formData = new FormData(this);
    const body = { user: formData.get('user'), text: formData.get('text') };

    fetch(`/comment/${currentImage}`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(body)
    })
    .then(res => res.json())
    .then(data => {
        const list = document.getElementById('commentList');
        list.innerHTML = '';
        data.comments.forEach(c => {
            const div = document.createElement('div');
            div.textContent = `${c.user}: ${c.text}`;
            list.appendChild(div);
        });
        document.getElementById('commentForm').reset();
    });
};

// Cancel comment panel
document.getElementById('cancelComment').onclick = () => {
    document.getElementById('commentPanel').classList.remove('active');
};

loadGallery();
</script>

</body>
</html>
-->


<!--<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Upload Site</title>
    <style>
        /* Global Styles */
        body {
            background: #f0f2f5; /* light gray Instagram-like background */
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            color: #333;
        }

        /* Header */
        .div-1 {
            background: #ffffff;
            width: 100%;
            height: 80px;
            border-bottom: 1px solid #ddd;
            display: flex;
            align-items: center;
            padding: 0 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .div-1 button {
            border-radius: 25px;
            border: none;
            background-color: #1877f2; /* blue like Instagram buttons */
            color: white;
            padding: 10px 20px;
            margin-right: 10px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, background 0.2s;
        }

        .div-1 button:hover {
            transform: translateY(-2px);
            background-color: #145dbf;
        }

        /* Upload Section */
        h2 {
            text-align: center;
            margin-top: 30px;
            font-weight: 600;
            color: #444;
        }

        

        form {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
        }

        .button-5, .button {
            border-radius: 25px;
            border: none;
            padding: 10px 20px;
            margin-left: 10px;
            cursor: pointer;
            background-color: #42b72a; /* green submit button */
            color: white;
            font-weight: bold;
            transition: transform 0.2s, background 0.2s;
        }

        .button-5:hover, .button:hover {
            transform: translateY(-2px);
            background-color: #36921f;
        }

        /* Gallery */
        #gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 20px;
            padding: 20px;
            max-width: 1200px;
            margin: auto;
        }

        .image-container {
            background: #ffffff;
            border-radius: 15px;
            padding: 15px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .image-container:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .image-container img {
            width: 100%;
            border-radius: 15px;
            margin-bottom: 10px;
        }

        .image-container button {
            border-radius: 20px;
            border: none;
            background-color: #ff4757; /* pinkish like Instagram */
            color: white;
            padding: 8px 12px;
            cursor: pointer;
            font-weight: bold;
            transition: transform 0.2s, background 0.2s;
        }

        .image-container button:hover {
            transform: translateY(-2px);
            background-color: #e8414b;
        }

        .comments {
            margin-top: 10px;
            font-size: 14px;
        }

        .comment-form input {
            padding: 5px 8px;
            border-radius: 12px;
            border: 1px solid #ddd;
            margin-right: 5px;
            width: 60%;
        }

        .comment-form button {
            border-radius: 12px;
            border: none;
            padding: 5px 10px;
            background-color: #1877f2;
            color: white;
            cursor: pointer;
        }

        .comment-form button:hover {
            background-color: #145dbf;
        }

        
        #customBtn {
    border-radius: 25px;
    border: none;
    background-color: #1877f2;
    color: white;
    padding: 10px 20px;
    font-weight: bold;
    cursor: pointer;
    transition: transform 0.2s, background 0.2s;
}

#customBtn:hover {
    transform: translateY(-2px);
    background-color: #145dbf;
}

#fileNames {
    font-style: italic;
    color: #555;
}


        
    </style>
</head>
<body>

    <div class="div-1">
        <a href="#"><button class="button-1">GAMES</button></a>
       <a href="business.html"> <button class="button-2">BUSINESS</button></a>
        <button class="button-3">SIGN UP</button>
        <button class="button-4">LOGIN</button>
    </div>

    <!--
    <form action="/upload" method="POST" enctype="multipart/form-data">
     
    <input type="file" name="image" id="fileInput" style="display:none;" multiple>

    
    <button type="button" id="customBtn" class="button-5">Choose File</button>
    <button type="submit" class="button">Upload</button>

     
    <span id="fileNames" style="margin-left:10px;"></span>
</form>-->

<!--

    <h2>Upload an Image</h2>
    <form action="/upload" method="POST" enctype="multipart/form-data">
        <input type="file" name="image" class="button-5" multiple>
        <button type="submit" class="button">Upload</button>
    </form>

    <h2>Uploaded Images</h2>
    <div id="gallery"></div>

    <script>
        function loadGallery() {
            fetch('/images')
            .then(res => res.json())
            .then(images => {
                const gallery = document.getElementById("gallery");
                gallery.innerHTML = "";

                images.forEach(img => {
                    const container = document.createElement("div");
                    container.className = "image-container";

                    const imageEl = document.createElement("img");
                    imageEl.src = "/uploads/" + img.filename;
                    container.appendChild(imageEl);

                    const likeBtn = document.createElement("button");
                    likeBtn.textContent = `Like (${img.likes})`;
                    likeBtn.onclick = () => {
                        fetch(`/like/${img.filename}`, { method: "POST" })
                        .then(res => res.json())
                        .then(data => {
                            likeBtn.textContent = `Like (${data.likes})`;
                        });
                    };
                    container.appendChild(likeBtn);

                    const commentList = document.createElement("div");
                    commentList.className = "comments";
                    img.comments.forEach(c => {
                        const cEl = document.createElement("div");
                        cEl.textContent = `${c.user}: ${c.text}`;
                        commentList.appendChild(cEl);
                    });
                    container.appendChild(commentList);

                    const commentForm = document.createElement("form");
                    commentForm.className = "comment-form";
                    commentForm.innerHTML = `
                        <input type="text" name="user" placeholder="Your name" required>
                        <input type="text" name="text" placeholder="Comment" required>
                        <button type="submit">Add Comment</button>
                    `;
                    commentForm.onsubmit = (e) => {
                        e.preventDefault();
                        const formData = new FormData(commentForm);
                        const body = { user: formData.get("user"), text: formData.get("text") };
                        fetch(`/comment/${img.filename}`, {
                            method: "POST",
                            headers: { "Content-Type": "application/json" },
                            body: JSON.stringify(body)
                        })
                        .then(res => res.json())
                        .then(data => {
                            commentList.innerHTML = "";
                            data.comments.forEach(c => {
                                const cEl = document.createElement("div");
                                cEl.textContent = `${c.user}: ${c.text}`;
                                commentList.appendChild(cEl);
                            });
                            commentForm.reset();
                        });
                    };
                    container.appendChild(commentForm);

                    gallery.appendChild(container);
                });
            });
        }

        loadGallery();
             const fileInput = document.getElementById('fileInput');
    const customBtn = document.getElementById('customBtn');
    const fileNames = document.getElementById('fileNames');

    // Open file selector when custom button is clicked
    customBtn.addEventListener('click', () => fileInput.click());

    // Show selected file names
    fileInput.addEventListener('change', () => {
        const files = Array.from(fileInput.files).map(f => f.name).join(', ');
        fileNames.textContent = files || 'No file chosen';
    });
 

    </script>

</body>
</html>--->





































<!--<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Upload Site</title>
    <style>
        body {
            background-color: whitesmoke;
            font: 15px/1.5 Arial, helvetica, sans-serif;
            padding: 0;
            margin: 0;
        }

        .div-1 {
            background-color: whitesmoke;
            width: 100%;
            height: 100px;
            border-bottom: 0.5px solid grey;
        }

        .button-1, .button-2, .button-3, .button-4 {
            border-radius: 10px;
            border: 0.5px solid grey;
            background: whitesmoke;
            height: 50px;
            padding: 10px;
            margin-top: 30px;
        }
        .button-1 { width: 200px; margin-left: 40px; }
        .button-2 { width: 200px; margin-left: 80px; }
        .button-3 { width: 150px; margin-left: 400px; border-radius: 20px; }
        .button-4 { width: 150px; margin-left: 50px; position: absolute; border-radius: 20px; }

        .button {
            border-radius: 20px;
            height: 50px;
            width: 100px;
        }

        .button-5{
            width: 150px; border-radius: 10px;
            border: 0.5px solid grey;
            background: whitesmoke;
            height: 50px;
            padding: 10px;
            margin-top: 30px;
        }

        /* Modern Instagram-like gallery styles */
        #gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 15px;
            margin: 20px;
        }

        .image-container {
            background: white;
            border: 0.5px solid grey;
            border-radius: 10px;
            padding: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .image-container:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px rgba(0,0,0,0.2);
        }

        .image-container img {
            width: 100%;
            border-radius: 10px;
            margin-bottom: 10px;
        }

        .comments {
            margin-top: 5px;
            font-size: 14px;
        }

        .comments div {
            margin-bottom: 3px;
        }

        .comment-form input {
            margin-right: 5px;
        }

    </style>
</head>
<body>

    <div class="div-1">
        <a href="games.html"><button class="button-1">GAMES</button></a>
        <button class="button-2">BUSINESS</button>
        <button class="button-3">SIGN UP</button>
        <button class="button-4">LOGIN</button>
    </div>

    <h2>Upload an Image</h2>
    <div>
        <form action="/upload" method="POST" enctype="multipart/form-data">
            <input type="file" name="image"  class="button-5" multiple>
            <button type="submit" class="button">Upload</button>
        </form>
    </div>

    <h2>Uploaded Images</h2>
    <div id="gallery"></div>

    <script>
        function loadGallery() {
            fetch('/images')
            .then(res => res.json())
            .then(images => {
                const gallery = document.getElementById("gallery");
                gallery.innerHTML = ""; // Clear gallery first

                images.forEach(img => {
                    const container = document.createElement("div");
                    container.className = "image-container";

                    // Image
                    const imageEl = document.createElement("img");
                    imageEl.src = "/uploads/" + img.filename;
                    container.appendChild(imageEl);

                    // Like button
                    const likeBtn = document.createElement("button");
                    likeBtn.textContent = `Like (${img.likes})`;
                    likeBtn.onclick = () => {
                        fetch(`/like/${img.filename}`, { method: "POST" })
                        .then(res => res.json())
                        .then(data => {
                            likeBtn.textContent = `Like (${data.likes})`;
                        });
                    };
                    container.appendChild(likeBtn);

                    // Comments
                    const commentList = document.createElement("div");
                    commentList.className = "comments";
                    img.comments.forEach(c => {
                        const cEl = document.createElement("div");
                        cEl.textContent = `${c.user}: ${c.text}`;
                        commentList.appendChild(cEl);
                    });
                    container.appendChild(commentList);

                    // Comment form
                    const commentForm = document.createElement("form");
                    commentForm.className = "comment-form";
                    commentForm.innerHTML = `
                        <input type="text" name="user" placeholder="Your name" required>
                        <input type="text" name="text" placeholder="Comment" required>
                        <button type="submit">Add Comment</button>
                    `;
                    commentForm.onsubmit = (e) => {
                        e.preventDefault();
                        const formData = new FormData(commentForm);
                        const body = {
                            user: formData.get("user"),
                            text: formData.get("text")
                        };
                        fetch(`/comment/${img.filename}`, {
                            method: "POST",
                            headers: { "Content-Type": "application/json" },
                            body: JSON.stringify(body)
                        })
                        .then(res => res.json())
                        .then(data => {
                            commentList.innerHTML = "";
                            data.comments.forEach(c => {
                                const cEl = document.createElement("div");
                                cEl.textContent = `${c.user}: ${c.text}`;
                                commentList.appendChild(cEl);
                            });
                            commentForm.reset();
                        });
                    };
                    container.appendChild(commentForm);

                    gallery.appendChild(container);
                });
            });
        }

        // Load gallery on page load
        loadGallery();
    </script>

</body>
</html>
--->






























<!--<!DOCTYPE html>
<html>
<head>
    <title>Image Upload Site</title>
    <style>
        body {
            background-color: whitesmoke;
            font: 15px/1.5 Arial, helvetica, sans-serif;
            padding: 0;
            margin: 0;
        }
        .button-1, .button-2, .button-3, .button-4 {
            border-radius: 10px;
            border: 0.5px solid grey;
            background: whitesmoke;
            height: 50px;
            padding: 10px;
            margin-top: 30px;
        }
        .button-1 { width: 200px; margin-left: 40px; }
        .button-2 { width: 200px; margin-left: 80px; }
        .button-3 { width: 150px; margin-left: 400px; border-radius:20px; }
        .button-4 { width: 150px; margin-left: 50px; position: absolute; border-radius:20px; }

        .div-1 {
            background-color: whitesmoke;
            width: 100%;
            height: 100px;
            border-bottom: 0.5px solid grey;
        }

        .button {
            border-radius: 10px;
            height: 50px;
            width: 100px;
        }

        #gallery {
            display: flex;
            flex-wrap: wrap;
        }

        .image-container {
            margin: 10px;
            padding: 10px;
            background: white;
            border: 0.5px solid grey;
            border-radius: 10px;
        }

        .image-container img {
            display: block;
            margin-bottom: 10px;
        }

        .image-container button {
            margin-top: 5px;
        }

        .comments {
            margin-top: 5px;
            font-size: 14px;
        }

        .comments div {
            margin-bottom: 3px;
        }

        .comment-form input {
            margin-right: 5px;
        }
    </style>
</head>
<body>

    <div class="div-1">
        <a href="games.html"><button class="button-1">GAMES</button></a>
        <button class="button-2">BUSINESS</button>
        <button class="button-3">SIGN UP</button>
        <button class="button-4">LOGIN</button>
    </div>

    <h2>Upload an Image</h2>

    <form action="/upload" method="POST" enctype="multipart/form-data">
        <input type="file" name="image" required>
        <button type="submit" class="button">Upload</button>
    </form>

    <h2>Uploaded Images</h2>
    <div id="gallery"></div>

    <script>
        function loadGallery() {
            fetch('/images')
                .then(res => res.json())
                .then(images => {
                    const gallery = document.getElementById("gallery");
                    gallery.innerHTML = "";

                    images.forEach(img => {
                        const container = document.createElement("div");
                        container.className = "image-container";

                        // Image
                        const imageEl = document.createElement("img");
                        imageEl.src = "/uploads/" + img.filename;
                        imageEl.width = 200;
                        container.appendChild(imageEl);

                        // Like button
                        const likeBtn = document.createElement("button");
                        likeBtn.textContent = `Like (${img.likes})`;
                        likeBtn.onclick = () => {
                            fetch(`/like/${img.filename}`, { method: "POST" })
                                .then(res => res.json())
                                .then(data => {
                                    likeBtn.textContent = `Like (${data.likes})`;
                                });
                        };
                        container.appendChild(likeBtn);

                        // Comments list
                        const commentList = document.createElement("div");
                        commentList.className = "comments";
                        img.comments.forEach(c => {
                            const cEl = document.createElement("div");
                            cEl.textContent = `${c.user}: ${c.text}`;
                            commentList.appendChild(cEl);
                        });
                        container.appendChild(commentList);

                        // Comment form
                        const commentForm = document.createElement("form");
                        commentForm.className = "comment-form";
                        commentForm.innerHTML = `
                            <input type="text" name="user" placeholder="Your name" required>
                            <input type="text" name="text" placeholder="Comment" required>
                            <button type="submit">Add Comment</button>
                        `;
                        commentForm.onsubmit = (e) => {
                            e.preventDefault();
                            const formData = new FormData(commentForm);
                            const body = {
                                user: formData.get("user"),
                                text: formData.get("text")
                            };
                            fetch(`/comment/${img.filename}`, {
                                method: "POST",
                                headers: { "Content-Type": "application/json" },
                                body: JSON.stringify(body)
                            })
                            .then(res => res.json())
                            .then(data => {
                                commentList.innerHTML = "";
                                data.comments.forEach(c => {
                                    const cEl = document.createElement("div");
                                    cEl.textContent = `${c.user}: ${c.text}`;
                                    commentList.appendChild(cEl);
                                });
                                commentForm.reset();
                            });
                        };
                        container.appendChild(commentForm);

                        gallery.appendChild(container);
                    });
                });
        }

        // Load gallery on page load
        loadGallery();
    </script>

</body>
</html>--->



















<!--<!DOCTYPE html>
<html>
<head>
    <title>Image Upload Site</title>
    <style>
        body {
            background-color: whitesmoke;
            font: 15px/1.5 Arial, Helvetica, sans-serif;
            padding: 0;
            margin: 0;
        }

        .header {
            background-color: whitesmoke;
            width: 100%;
            height: 100px;
            border-bottom: 0.5px solid grey;
            display: flex;
            align-items: center;
            padding: 0 20px;
        }

        .header button {
            border-radius: 10px;
            border: 0.5px solid grey;
            background: whitesmoke;
            height: 50px;
            width: 150px;
            margin-right: 20px;
            cursor: pointer;
        }

        h2 {
            margin-left: 20px;
        }

        form {
            margin: 20px;
        }

        #gallery {
            margin: 20px;
        }

        .image-container {
            border: 1px solid #ccc;
            margin: 10px;
            padding: 10px;
            display: inline-block;
            vertical-align: top;
        }

        .image-container img {
            display: block;
            margin-bottom: 5px;
        }

        .image-container button {
            margin-bottom: 5px;
        }

        .image-container input {
            margin: 2px 2px 2px 0;
        }
    </style>
</head>
<body>

    <div class="header">
        <button>GAMES</button>
        <button>BUSINESS</button>
        <button>SIGN UP</button>
        <button>LOGIN</button>
    </div>

    <h2>Upload an Image</h2>

    <form action="/upload" method="POST" enctype="multipart/form-data">
        <input type="file" name="image" required>
        <button type="submit">Upload</button>
    </form>

    <h2>Uploaded Images</h2>
    <div id="gallery"></div>

    <script>
        function loadGallery() {
            fetch('/images')
            .then(res => res.json())
            .then(images => {
                const gallery = document.getElementById("gallery");
                gallery.innerHTML = ""; // Clear existing gallery

                images.forEach(img => {
                    const container = document.createElement("div");
                    container.className = "image-container";

                    // Image
                    const imageEl = document.createElement("img");
                    imageEl.src = "/uploads/" + img.filename;
                    imageEl.width = 200;
                    container.appendChild(imageEl);

                    // Like button
                    const likeBtn = document.createElement("button");
                    likeBtn.textContent = `Like (${img.likes})`;
                    likeBtn.onclick = () => {
                        fetch(`/like/${img.filename}`, { method: "POST" })
                        .then(res => res.json())
                        .then(data => {
                            likeBtn.textContent = `Like (${data.likes})`;
                        });
                    };
                    container.appendChild(likeBtn);

                    // Comments list
                    const commentList = document.createElement("div");
                    img.comments.forEach(c => {
                        const cEl = document.createElement("div");
                        cEl.textContent = `${c.user}: ${c.text}`;
                        commentList.appendChild(cEl);
                    });
                    container.appendChild(commentList);

                    // Comment form
                    const commentForm = document.createElement("form");
                    commentForm.innerHTML = `
                        <input type="text" name="user" placeholder="Your name" required>
                        <input type="text" name="text" placeholder="Comment" required>
                        <button type="submit">Add Comment</button>
                    `;
                    commentForm.onsubmit = (e) => {
                        e.preventDefault();
                        const formData = new FormData(commentForm);
                        const body = {
                            user: formData.get("user"),
                            text: formData.get("text")
                        };
                        fetch(`/comment/${img.filename}`, {
                            method: "POST",
                            headers: { "Content-Type": "application/json" },
                            body: JSON.stringify(body)
                        })
                        .then(res => res.json())
                        .then(data => {
                            commentList.innerHTML = "";
                            data.comments.forEach(c => {
                                const cEl = document.createElement("div");
                                cEl.textContent = `${c.user}: ${c.text}`;
                                commentList.appendChild(cEl);
                            });
                            commentForm.reset();
                        });
                    };
                    container.appendChild(commentForm);

                    gallery.appendChild(container);
                });
            });
        }

        // Initial load
        loadGallery();
    </script>
</body>
</html>-->

<!---<!DOCTYPE html>
<html>
<head>
    <title>Image Upload Site</title>
    <style>
        body {
            background-color: whitesmoke;
            font: 15px/1.5 Arial, helvetica, sans-serif;
            padding: 0;
            margin: 0;
        }

        .div-1 {
            background-color: whitesmoke;
            width: 100%;
            height: 100px;
            border-bottom: 0.5px solid grey;
        }

        .button-1, .button-2, .button-3, .button-4 {
            border-radius: 10px;
            border: 0.5px solid grey;
            background: whitesmoke;
            height: 50px;
            padding: 10px;
            margin-top: 30px;
        }
        .button-1 { width: 200px; margin-left: 40px; }
        .button-2 { width: 200px; margin-left: 80px; }
        .button-3 { width: 150px; margin-left: 400px; border-radius: 20px; }
        .button-4 { width: 150px; margin-left: 50px; position: absolute; border-radius: 20px; }

        .button {
            border-radius: 20px;
            height: 50px;
            width: 100px;
        }

        #gallery {
            display: flex;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .image-container {
            margin: 10px;
            padding: 10px;
            background: white;
            border: 0.5px solid grey;
            border-radius: 10px;
            width: 220px;
        }

        .image-container img {
            display: block;
            margin-bottom: 10px;
            width: 200px;
        }

        .image-container button {
            margin-bottom: 10px;
        }

        .comments {
            margin-top: 5px;
            font-size: 14px;
        }

        .comments div {
            margin-bottom: 3px;
        }

        .comment-form input {
            margin-right: 5px;
        }
        .button-5{
            width: 150px; border-radius: 10px;
            border: 0.5px solid grey;
            background: whitesmoke;
            height: 50px;
            padding: 10px;
            margin-top: 30px;


        }
    </style>
</head>
<body>

    <div class="div-1">
        <a href="games.html"><button class="button-1">GAMES</button></a>
        <button class="button-2">BUSINESS</button>
        <button class="button-3">SIGN UP</button>
        <button class="button-4">LOGIN</button>
    </div>

    <h2>Upload an Image</h2>
    <div>
        
    <form action="/upload" method="POST" enctype="multipart/form-data">
        <input type="file" name="image"  class="button-5" multiple>
        <button type="submit" class="button">Upload</button>
        </form>
    

    <h2>Uploaded Images</h2>
    <div id="gallery"></div>

    <script>
        function loadGallery() {
            fetch('/images')
            .then(res => res.json())
            .then(images => {
                const gallery = document.getElementById("gallery");
                gallery.innerHTML = ""; // Clear gallery first

                images.forEach(img => {
                    const container = document.createElement("div");
                    container.className = "image-container";

                    // Image
                    const imageEl = document.createElement("img");
                    imageEl.src = "/uploads/" + img.filename;
                    container.appendChild(imageEl);

                    // Like button
                    const likeBtn = document.createElement("button");
                    likeBtn.textContent = `Like (${img.likes})`;
                    likeBtn.onclick = () => {
                        fetch(`/like/${img.filename}`, { method: "POST" })
                        .then(res => res.json())
                        .then(data => {
                            likeBtn.textContent = `Like (${data.likes})`;
                        });
                    };
                    container.appendChild(likeBtn);

                    // Comments
                    const commentList = document.createElement("div");
                    commentList.className = "comments";
                    img.comments.forEach(c => {
                        const cEl = document.createElement("div");
                        cEl.textContent = `${c.user}: ${c.text}`;
                        commentList.appendChild(cEl);
                    });
                    container.appendChild(commentList);

                    // Comment form
                    const commentForm = document.createElement("form");
                    commentForm.className = "comment-form";
                    commentForm.innerHTML = `
                        <input type="text" name="user" placeholder="Your name" required>
                        <input type="text" name="text" placeholder="Comment" required>
                        <button type="submit">Add Comment</button>
                    `;
                    commentForm.onsubmit = (e) => {
                        e.preventDefault();
                        const formData = new FormData(commentForm);
                        const body = {
                            user: formData.get("user"),
                            text: formData.get("text")
                        };
                        fetch(`/comment/${img.filename}`, {
                            method: "POST",
                            headers: { "Content-Type": "application/json" },
                            body: JSON.stringify(body)
                        })
                        .then(res => res.json())
                        .then(data => {
                            commentList.innerHTML = "";
                            data.comments.forEach(c => {
                                const cEl = document.createElement("div");
                                cEl.textContent = `${c.user}: ${c.text}`;
                                commentList.appendChild(cEl);
                            });
                            commentForm.reset();
                        });
                    };
                    container.appendChild(commentForm);

                    gallery.appendChild(container);
                });
            });
        }

        // Load gallery on page load
        loadGallery();
    </script>

</body>
</html>--->











